apiVersion: v1
kind: Pod
metadata:
  name: elasticsearch
spec:
  containers:
  - name: elasticsearch01
    image: deckerego/elasticsearch:5.6.4
    env:
    - name: ES_JAVA_OPTS
      value: -Xms800M -Xmx800M
    - name: bootstrap.memory_lock
      value: "false"
    resources:
      requests:
        cpu: "1000m"
        memory: "1Gi"
    ports:
      - containerPort: 9300
        name: transport
        protocol: TCP
      - containerPort: 9200
        name: http
        protocol: TCP
    volumeMounts:
    - mountPath: /usr/share/elasticsearch/data
      name: esdata01
  restartPolicy: Never
  volumes:
  - name: esdata01
    persistentVolumeClaim:
      claimName: esdata01
